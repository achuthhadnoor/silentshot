"use strict";const{app:app,Tray:Tray,clipboard:clipboard}=require("electron"),{join:join}=require("path"),screenshot=require("screenshot-desktop"),{homedir:homedir}=require("os");let _tray,format="jpg";function createTray(){const e=join(__dirname,"static/light.png");(_tray=new Tray(e)).setToolTip("SilentShot | click to capture"),_tray.on("click",()=>{let e=`${homedir}/Downloads/capture${Date.now()}.${format}`;screenshot({filename:e}).then(e=>{console.log("copied to clipboard"),clipboard.writeImage(e)})}),_tray.on("right-click",()=>{const e=[{label:"copy image to clipboard / save to disk only ",accelerator:"darwin"===process.platform?"Alt+Cmd+L":"Alt+Ctrl+L",click:()=>{clickTray(),tray.setTitle("")}},{label:"Stop recording",click:async()=>{await stopRecording()}},{role:"quit",accelerator:(process.platform,"Alt+Shift+L")}],o=Menu.buildFromTemplate(e);_tray.popUpContextMenu(o)})}app.dock&&app.dock.hide(),app.on("ready",()=>{createTray()});